{
  "version": 3,
  "sources": ["../../src/plugins/aseprite.ts"],
  "sourcesContent": ["// load aseprite spritesheet\n\n// @ts-ignore\nmodule.exports = (k: KaboomCtx) => {\n\nfunction loadAseprite(name: string, imgSrc: string, jsonSrc: string) {\n\n\tconst loader = new Promise<SpriteData>((resolve, reject) => {\n\n\t\t\tconst jsonPath = k.loadRoot() + jsonSrc;\n\n\t\t\tk.loadSprite(name, imgSrc)\n\t\t\t\t.then((sprite: SpriteData) => {\n\t\t\t\t\tfetch(jsonPath)\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\treturn res.json();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then((data) => {\n\t\t\t\t\t\t\tconst size = data.meta.size;\n\t\t\t\t\t\t\tsprite.frames = data.frames.map((f: any) => {\n\t\t\t\t\t\t\t\treturn k.quad(\n\t\t\t\t\t\t\t\t\tf.frame.x / size.w,\n\t\t\t\t\t\t\t\t\tf.frame.y / size.h,\n\t\t\t\t\t\t\t\t\tf.frame.w / size.w,\n\t\t\t\t\t\t\t\t\tf.frame.h / size.h,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tfor (const anim of data.meta.frameTags) {\n\t\t\t\t\t\t\t\tsprite.anims[anim.name] = {\n\t\t\t\t\t\t\t\t\tfrom: anim.from,\n\t\t\t\t\t\t\t\t\tto: anim.to,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresolve(sprite);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\treject(`failed to load ${jsonPath}`);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t;\n\t\t\t\t})\n\t\t\t\t.catch((err: any) => reject(err));\n\n\t\t});\n\n\tk.addLoader(loader);\n\n\treturn loader;\n\n}\n\nreturn {\n\tloadAseprite,\n};\n\n};\n"],
  "mappings": "6IAAA,gBAGA,EAAO,QAAU,AAAC,GAAiB,CAEnC,WAAsB,EAAc,EAAgB,EAAiB,CAEpE,GAAM,GAAS,GAAI,SAAoB,CAAC,EAAS,IAAW,CAE1D,GAAM,GAAW,EAAE,WAAa,EAEhC,EAAE,WAAW,EAAM,GACjB,KAAK,AAAC,GAAuB,CAC7B,MAAM,GACJ,KAAK,AAAC,GACC,EAAI,QAEX,KAAK,AAAC,GAAS,CACf,GAAM,GAAO,EAAK,KAAK,KACvB,EAAO,OAAS,EAAK,OAAO,IAAI,AAAC,GACzB,EAAE,KACR,EAAE,MAAM,EAAI,EAAK,EACjB,EAAE,MAAM,EAAI,EAAK,EACjB,EAAE,MAAM,EAAI,EAAK,EACjB,EAAE,MAAM,EAAI,EAAK,IAGnB,OAAW,KAAQ,GAAK,KAAK,UAC5B,EAAO,MAAM,EAAK,MAAQ,CACzB,KAAM,EAAK,KACX,GAAI,EAAK,IAGX,EAAQ,KAER,MAAM,IAAM,CACZ,EAAO,kBAAkB,SAI3B,MAAM,AAAC,GAAa,EAAO,MAI/B,SAAE,UAAU,GAEL,EAzCC,2BA6CF,CACN",
  "names": []
}
