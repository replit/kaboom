{
  "version": 3,
  "sources": ["../../src/plugins/pedit.ts"],
  "sourcesContent": ["// load pedit\n// https://github.com/slmjkdbtl/pedit.js\n\n// @ts-ignore\nmodule.exports = (k: KaboomCtx) => {\n\nfunction loadImg(src: string): Promise<HTMLImageElement> {\n\tconst img = new Image();\n\timg.src = src;\n\timg.crossOrigin = \"anonymous\";\n\treturn new Promise<HTMLImageElement>((resolve, reject) => {\n\t\timg.onload = () => {\n\t\t\tresolve(img);\n\t\t};\n\t\timg.onerror = () => {\n\t\t\treject(`failed to load ${src}`);\n\t\t};\n\t});\n}\n\nfunction loadPedit(name: string, src: string): Promise<SpriteData> {\n\n\tconst loader = new Promise<SpriteData>((resolve, reject) => {\n\n\t\tfetch(k.loadRoot() + src)\n\t\t\t.then((res) => res.json())\n\t\t\t.then(async (data) => {\n\n\t\t\t\tconst images = await Promise.all(data.frames.map(loadImg));\n\t\t\t\tconst canvas = document.createElement(\"canvas\");\n\t\t\t\tcanvas.width = data.width;\n\t\t\t\tcanvas.height = data.height * data.frames.length;\n\n\t\t\t\tconst ctx = canvas.getContext(\"2d\");\n\n\t\t\t\timages.forEach((img: HTMLImageElement, i) => {\n\t\t\t\t\tctx.drawImage(img, 0, i * data.height);\n\t\t\t\t});\n\n\t\t\t\treturn k.loadSprite(name, canvas, {\n\t\t\t\t\tsliceY: data.frames.length,\n\t\t\t\t\tanims: data.anims,\n\t\t\t\t});\n\t\t\t})\n\t\t\t.then(resolve)\n\t\t\t.catch(reject)\n\t\t\t;\n\n\t});\n\n\tk.addLoader(loader);\n\n\treturn loader;\n\n}\n\nreturn {\n\tloadPedit,\n};\n\n};\n"],
  "mappings": "0VAAA,gBAIA,EAAO,QAAU,AAAC,GAAiB,CAEnC,WAAiB,EAAwC,CACxD,GAAM,GAAM,GAAI,OAChB,SAAI,IAAM,EACV,EAAI,YAAc,YACX,GAAI,SAA0B,CAAC,EAAS,IAAW,CACzD,EAAI,OAAS,IAAM,CAClB,EAAQ,IAET,EAAI,QAAU,IAAM,CACnB,EAAO,kBAAkB,QATnB,eAcT,WAAmB,EAAc,EAAkC,CAElE,GAAM,GAAS,GAAI,SAAoB,CAAC,EAAS,IAAW,CAE3D,MAAM,EAAE,WAAa,GACnB,KAAK,AAAC,GAAQ,EAAI,QAClB,KAAK,AAAO,GAAS,wBAErB,GAAM,GAAS,KAAM,SAAQ,IAAI,EAAK,OAAO,IAAI,IAC3C,EAAS,SAAS,cAAc,UACtC,EAAO,MAAQ,EAAK,MACpB,EAAO,OAAS,EAAK,OAAS,EAAK,OAAO,OAE1C,GAAM,GAAM,EAAO,WAAW,MAE9B,SAAO,QAAQ,CAAC,EAAuB,IAAM,CAC5C,EAAI,UAAU,EAAK,EAAG,EAAI,EAAK,UAGzB,EAAE,WAAW,EAAM,EAAQ,CACjC,OAAQ,EAAK,OAAO,OACpB,MAAO,EAAK,WAGb,KAAK,GACL,MAAM,KAKT,SAAE,UAAU,GAEL,EAhCC,wBAoCF,CACN",
  "names": []
}
